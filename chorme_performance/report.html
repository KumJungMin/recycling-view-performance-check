<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Virtual Scroll Performance Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: system-ui, sans-serif;
        background: #fafafa;
        margin: 40px;
      }
      h1 {
        text-align: center;
      }
      section {
        margin-top: 40px;
      }
      canvas {
        max-width: 800px;
        margin: 0 auto;
        display: block;
      }
      table {
        width: 90%;
        margin: 40px auto;
        border-collapse: collapse;
      }
      th, td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
      }
      th {
        background: #f3f3f3;
      }
    </style>
  </head>
  <body>
    <h1>Virtual Scroll Performance Report</h1>
    <p style="text-align:center;">측정 시나리오: 페이지 로드 → 스크롤 동작 (Full vs Virtual Scroll)</p>
    <p style="text-align:center;">날짜: <span id="date"></span></p>

    <section>
      <h2>1️⃣ Layout / Paint Time</h2>
      <canvas id="layoutPaintChart"></canvas>
    </section>

    <section>
      <h2>2️⃣ GPU Memory / FPS</h2>
      <canvas id="gpuFpsChart"></canvas>
    </section>

    <section>
      <h2>3️⃣ Frame & Layout Count</h2>
      <canvas id="frameLayoutChart"></canvas>
    </section>

    <section>
      <h2>4️⃣ Summary Table</h2>
      <table>
        <thead>
          <tr>
            <th>지표</th>
            <th>Full Render</th>
            <th>Virtual Scroll</th>
            <th>개선율</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>UpdateLayoutTree</td><td>52.3 ms</td><td>6.3 ms</td><td>▲ 88%</td></tr>
          <tr><td>평균 Paint</td><td>3.8 ms</td><td>1.9 ms</td><td>▲ 50%</td></tr>
          <tr><td>GPU Memory</td><td>40.9 MB</td><td>6.5 MB</td><td>▲ 84%</td></tr>
          <tr><td>Frame Count</td><td>28</td><td>33</td><td>+18%</td></tr>
          <tr><td>FPS</td><td>~50 fps</td><td>~60 fps</td><td>+20%</td></tr>
          <tr><td>LayoutCount</td><td>3</td><td>16</td><td>(빈도 ↑, 비용 ↓)</td></tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>5️⃣ 결론 요약</h2>
      <p style="max-width:800px; margin:auto; line-height:1.6;">
        Virtual Scroll은 초기 렌더링 시 LayoutTree 계산 시간을 8배 단축하고, Paint 비용을 40~50% 절감했다.
        GPU 메모리 사용량은 Full Render의 약 1/6 수준이며, FPS는 60 근처로 안정적으로 유지된다.
        스크롤 중 Layout 이벤트가 많지만 각 Layout의 범위가 작기 때문에 성능 저하는 거의 없으며,
        전체적으로 “부드러운 스크롤”과 “낮은 렌더링 부하”를 동시에 달성했다.
      </p>
    </section>

    <script>
      document.getElementById("date").textContent = new Date().toLocaleString()

      const layoutPaintCtx = document.getElementById('layoutPaintChart');
      new Chart(layoutPaintCtx, {
        type: 'bar',
        data: {
          labels: ['UpdateLayoutTree (ms)', 'Paint Avg (ms)'],
          datasets: [
            {
              label: 'Full Render',
              data: [52.3, 3.8],
              backgroundColor: 'rgba(255, 99, 132, 0.6)',
            },
            {
              label: 'Virtual Scroll',
              data: [6.3, 1.9],
              backgroundColor: 'rgba(75, 192, 192, 0.6)',
            },
          ],
        },
        options: {
          responsive: true,
          plugins: { legend: { position: 'top' } },
        },
      });

      const gpuFpsCtx = document.getElementById('gpuFpsChart');
      new Chart(gpuFpsCtx, {
        type: 'bar',
        data: {
          labels: ['GPU Memory (MB)', 'FPS'],
          datasets: [
            {
              label: 'Full Render',
              data: [40.9, 50],
              backgroundColor: 'rgba(255, 159, 64, 0.6)',
            },
            {
              label: 'Virtual Scroll',
              data: [6.5, 60],
              backgroundColor: 'rgba(153, 102, 255, 0.6)',
            },
          ],
        },
      });

      const frameLayoutCtx = document.getElementById('frameLayoutChart');
      new Chart(frameLayoutCtx, {
        type: 'bar',
        data: {
          labels: ['Frame Count', 'Layout Count'],
          datasets: [
            {
              label: 'Full Render',
              data: [28, 3],
              backgroundColor: 'rgba(255, 206, 86, 0.6)',
            },
            {
              label: 'Virtual Scroll',
              data: [33, 16],
              backgroundColor: 'rgba(54, 162, 235, 0.6)',
            },
          ],
        },
      });
    </script>
  </body>
</html>